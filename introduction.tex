\section{Introduction}

  Interactive Theorem Provers (ITPs) are widely used in formal mathematics and
  software/hardware verification. Hammers, a type of proof automation tool for
  ITPs, utilize Automated Theorem Provers (ATPs) to automatically solve proof goals
  arising from the formalization process. A hammer has three main components:
  premise selection, translation from the ITP's logical system to the ATP's
  logical system, and proof reconstruction from the ATP's logical system to
  the ITP's logical system. Several popular ITPs, including Coq, Lean and Agda,
  are based on a highly expressive logical system called dependent type theory.
  On the other hand, ATPs are usually based on less expressive logical systems such
  as first-order logic (FOL) and higher-order logic (HOL). This discrepancy in
  logical systems poses a significant challenge to the translation procedure from
  ITPs to ATPs.

  \noindent There are two existing approaches for translation from more expressive
  logical systems to less expressive ones. The first approach is encoding-based translation,
  which is used in CoqHammer to translate Coq into untyped FOL. The idea is to encode
  constructions in the more expressive system using function symbols in the less
  expressive system, and define the translation as a recursive function on the construction
  rules of the more expressive system. For example, in CoqHammer, encoding of typing relations
  and type inhabitation is achieved by introducing two uninterpreted function symbols;
  translation functions for propositions, types and terms are defined recursively on
  the formation rules of dependent type theory. Encoding-based translation has the advantage of
  being (almost) complete and straightforward to compute. However, type information are
  usually omitted to produce translation results of reasonable size, which sacrifices soundness.
  Moreover, even with type information omitted, the result is usually much larger
  than the original term.

  \noindent The second approach is called monomorphization, which is used to eliminate polymorphism
  in Isabelle. The idea is that, the proof of many propositions in the more expressive logical
  system can essentially be conducted in the less expressive logical system. In other words,
  many features of the more expressive system are often irrelevant to the proof. For example,
  in polymorphic HOL, given the function
  $\mathsf{List.append} : \forall (\alpha : \mathsf{Type}). \mathsf{List} \ \alpha \to \mathsf{List} \ \alpha \to \mathsf{List} \ \alpha$,
  four lists $xs, ys, zs, ts$ of natural numbers, and the premise $xs = zs \land ys = ts$, the proposition
  $\mathsf{List.append} \ \mathbb{N} \ xs \ ys = \mathsf{List.append} \ \mathbb{N} \ zs \ ts$ is
  provable using two rewrites, which are admissible proof rules in many-sorted FOL. Monomorphization
  has the advantage that term structures are preserved during translation, and that
  translation results are smaller than those produced by encoding-based approach.
  However, complex term structures such as existential type quantifiers and non-leading universal
  type quantifiers are difficult to handle in monomorphization, and makes the translation incomplete.

  \noindent This paper proposes an extension of Sledgehammer's monomorphization procedure
  to dependent type theory. We implemented the translation in Lean4 under the name Lean-auto.
  Completeness of the translation is sacrificed for smaller translation
  results. We argue that smaller problem size is crucial to obtaining better performance
  from ATPs, and that our translation can handel realistic Lean4 use cases despite being incomplete.